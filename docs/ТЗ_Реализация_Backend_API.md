# Техническое задание: Backend API для системы генерации 3D-моделей

## 1. Цель проекта
Разработка серверной части приложения, обеспечивающей приём, обработку и выдачу данных для системы генерации 3D-моделей. Backend API должно соответствовать следующим критериям:
- **Безопасность** — защищённая авторизация и валидация данных
- **Масштабируемость** — поддержка горизонтального масштабирования
- **Интеграция с ML-сервисом** — эффективное взаимодействие с модулем генерации моделей
- **Асинхронная работа** — обработка длительных операций без блокировки

## 2. Функциональные требования

### 2.1. Регистрация и авторизация пользователей
- Реализация JWT-авторизации
- Эндпоинты:
  - `POST /auth/register` — регистрация пользователя
  - `POST /auth/login` — аутентификация и получение токена
  - `GET /auth/profile` — получение профиля пользователя

### 2.2. Управление задачами генерации 3D-моделей
Поддержка полного жизненного цикла задачи:
- `POST /generate` — создание задачи генерации
  - Входные данные: изображение или текстовый промпт, параметры генерации, выбор модели
- `GET /generate/{task_id}` — получение статуса задачи
- `GET /generate/{task_id}/result` — загрузка результата
- `POST /generate/{task_id}/cancel` — отмена выполнения задачи (опционально)

### 2.3. Управление файлами
- Загрузка исходных изображений в хранилище (S3/MinIO)
- Выдача сгенерированных 3D-моделей (форматы: .obj, .glb, .fbx)
- Эндпоинты:
  - `POST /upload` — загрузка файлов
  - `GET /files/{file_id}` — скачивание файла

### 2.4. Интеграция с ML-модулем
- Передача входных данных в ML-сервис
- Мониторинг статуса и прогресса обработки
- Приём готовых 3D-моделей
- Организация асинхронной очереди задач (Celery + Redis/RabbitMQ)

## 3. Нефункциональные требования

### 3.1. Производительность
- Поддержка 50+ одновременных запросов
- Асинхронная обработка задач генерации

### 3.2. Масштабируемость
- Контейнеризация (Docker)
- Возможность горизонтального масштабирования компонентов

### 3.3. Безопасность
- JWT-авторизация с refresh-токенами
- Валидация и санитизация входных данных
- Ограничение размеров загружаемых файлов
- Настройка CORS-политики

## 4. Архитектура и технологии

### Стек технологий
- **Фреймворк**: Python + FastAPI (альтернатива: Django REST Framework)
- **Очередь задач**: Celery + Redis
- **База данных**: PostgreSQL
- **Хранилище файлов**: S3-совместимое (MinIO или облачное решение)
- **Контейнеризация**: Docker + docker-compose
